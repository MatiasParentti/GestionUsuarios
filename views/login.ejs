<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">

</head>
<body >
 
  
<div class="container mt-5">
  <h1 class="text-center">Iniciar Sesion</h1>
  <div class="row">
    <div class="col">
    
    </div>
    <div class="col">

      <form id="loginForm">
    
  <div class="mb-3">
    <label for="exampleInputEmail1" class="form-label">Usuario</label>
    <input type="text" class="form-control" id="username" aria-describedby="emailHelp"  required >
  </div>
  <div class="mb-3">
    <label for="exampleInputPassword1" class="form-label">Password</label>
    <input type="password" class="form-control" id="password"  required>
  </div>
 
  <button type="submit" class="btn btn-primary">Entrar</button>
</form>
    
    </div>
    <div class="col">
      
    </div>
  </div>
</div>


      
  

  <script>
    document.getElementById('loginForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      const res = await fetch('/auth/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        credentials: 'include',
        body: JSON.stringify({ username, password }),
      });

      if (res.ok) {
        window.location.href = '/dashboard';
      } else {
        const err = await res.json();
        alert('Error: ' + err.error);
      }
    });
  </script>
</body>
</html>
